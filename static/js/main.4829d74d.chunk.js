(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{42:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a(0),c=a.n(s),r=a(4),o=a.n(r),u=a(3),i=a(12),l=a(9),j=a(10),g=a.n(j);a(40);function b(){return Object(n.jsx)(g.a,{type:"Bars",color:"#00BFFF",height:80,width:80})}var m=a(8),h=a.n(m),O=a(11),d="19027905-98233d65311b3fd13bc0a1406";function f(){return(f=Object(O.a)(h.a.mark((function t(e,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(d,"&image_type=photo&orientation=horizontal&per_page=12"));case 2:if(!(n=t.sent).ok){t.next=5;break}return t.abrupt("return",n.json());case 5:return t.next=7,Promise.reject(new Error("No images"));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=function(t,e){return f.apply(this,arguments)},x=a(13),v=function(t){var e=t.onSubmit,a=Object(s.useState)(""),c=Object(u.a)(a,2),r=c[0],o=c[1];return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),e(r)},children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)(x.a,{})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(t){o(t.target.value)}})]})})},w=function(t){var e=t.image,a=t.toggleModal;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{className:"ImageGalleryItemImage",src:e.webformatURL,alt:e.tags,onClick:function(){a({status:!0,src:e.largeImageURL,alt:e.tags})}})})},S=function(t){var e=t.images,a=t.toggleModal;return Object(n.jsx)("ul",{className:"ImageGallery",children:e.map((function(t){return Object(n.jsx)(w,{image:t,toggleModal:a},t.id)}))})};var y=function(t){var e=t.message;return Object(n.jsx)("div",{role:"alert",children:Object(n.jsxs)("p",{children:["Something went wrong. Error: ",e]})})},k=function(t){var e=t.src,a=t.alt,c=t.toggleModal;Object(s.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(t){"Escape"!==t.key&&t.target!==t.currentTarget||c({status:!1})};return Object(n.jsx)("div",{className:"Overlay",onClick:r,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:e,alt:a})})})},I=function(t){var e=t.onClick;return Object(n.jsx)("button",{type:"button",className:"Button",onClick:e,children:"Load more"})},N=function(){var t=Object(s.useState)([]),e=Object(u.a)(t,2),a=e[0],c=e[1],r=Object(s.useState)(""),o=Object(u.a)(r,2),i=o[0],j=o[1],g=Object(s.useState)(1),m=Object(u.a)(g,2),h=m[0],O=m[1],d=Object(s.useState)(!1),f=Object(u.a)(d,2),x=f[0],w=f[1],N=Object(s.useState)({status:!1,message:""}),E=Object(u.a)(N,2),C=E[0],F=E[1],M=Object(s.useState)({status:!1,targetImage:null}),L=Object(u.a)(M,2),B=L[0],G=L[1],T=Object(s.useState)(!1),q=Object(u.a)(T,2),H=q[0],J=q[1];function P(t,e){if(""===t)return c([]),J(!1),void F({status:!0,message:"Please input search request"});w(!0),F({status:!1,message:""}),p(t,e).then((function(t){var n,s;1===e?c(t.hits):(c((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.hits))})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})),n=t.totalHits,s=a.length+t.hits.length,J(n>s),F(n?{status:!1,message:""}:{status:!0,message:"Nothing was found. Try again."}),O((function(t){return t+1}))})).catch((function(t){return F({status:!0,message:"Something wrong: ".concat(t.message)})})).finally((function(){return w(!1)}))}Object(s.useEffect)((function(){O(1),P(i,1)}),[i]);var R=function(t){var e=t.status,a=t.src,n=t.alt;G(e?{status:!0,targetImage:{src:a,alt:n}}:{status:!1,targetImage:null})};return Object(n.jsxs)("div",{children:[Object(n.jsx)(v,{onSubmit:j}),C.status&&Object(n.jsx)(y,{message:C.message}),x&&Object(n.jsx)(b,{}),a.length>0&&Object(n.jsx)(S,{images:a,toggleModal:R}),B.status&&Object(n.jsx)(k,{src:B.targetImage.src,alt:B.targetImage.alt,toggleModal:R}),H&&Object(n.jsx)(I,{onClick:function(){return P(i,h)}})]})};function E(){var t=Object(s.useState)(""),e=Object(u.a)(t,1)[0];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(N,{imageName:e}),Object(n.jsx)(i.a,{autoClose:2e3})]})}a(42);o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(E,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.4829d74d.chunk.js.map